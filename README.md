！！！！！所有内容全部由Gemini完成，本人只提供思路！！！！！！
 
 大阪世博会多场馆预约脚本

 项目介绍

此 Python 脚本旨在帮助您自动化 2025 年大阪世博会指定场馆的门票预约流程。通过高效的并发请求和持续重试机制，它能显著提升您在门票放票时的预约成功率。脚本支持同时预约多个不同场馆的多个时间段。

 快速开始

 1. 安装

确保您的系统已安装 Python 3.6 或更高版本。您可以从 [Python 官方网站](https://www.python.org/downloads/) 下载并安装。

安装完成后，打开命令行或终端，运行以下命令安装脚本所需的 `requests` 库：

 2. 配置脚本

在运行脚本前，您需要编辑脚本文件 (`.py` 文件) 顶部的几个关键变量，以匹配您的门票信息和预约偏好。

`COOKIE_STRING`：这是最重要的一项！ 脚本通过它来模拟您的登录状态。

  1. 在浏览器中登录大阪世博会预约网站：`https://ticket.expo2025.or.jp/`。

  2. 打开浏览器的开发者工具（通常按 `F12` 或 `Ctrl+Shift+I` / `Cmd+Option+I`）。

  3. 切换到“网络” (Network) 选项卡，然后刷新页面。

  4. 在网络请求列表中，找到一个对 `/api/d/user_event_reservations` 或其他相关预约 API 的 `POST` 请求（通常可以在 `XHR`/`Fetch` 过滤器下找到）。

  5. 点击该请求，查看其“请求头” (Request Headers) 部分。

  6. 找到 `Cookie` 字段，并完整复制其值（包括所有 `key=value;` 对）。

  7. 将复制的字符串粘贴到脚本中的 `COOKIE_STRING` = '...' 这一行。

  重要提示：Cookie 具有时效性。如果脚本运行中出现“参数无效”或类似错误，很可能是 Cookie 已失效，您需要重新获取最新 Cookie 并更新此变量。

`TICKET_IDS`：您的世博会门票 ID 列表。例如：`TICKET_IDS = ["您的门票ID1"]`。
`ENTRANCE_DATE`：您希望预约的日期，格式为 `YYYYMMDD`。例如：`"20250618"` 代表 2025 年 6 月 18 日。

`ALL_VENUES_CONFIG`：这个列表定义了您想要预约的所有场馆。每个字典代表一个场馆：

   `"name"`: 场馆的中文名称（仅用于控制台显示）。

   `"EVENT_CODE"`: 场馆的唯一代码，预约请求中必需的参数。

   `"_START_TIMES_RAW"`: 该场馆所有可预约的时间段字符串。

     对于意大利馆 (C2N0) 和 大阪健康馆＋游戏人生 (H5H0)，请从预约页面复制 `HH:MM-HH:MM` 格式的时间字符串（多个时间段可能连接在一起）。

     对于日本馆 (H1H9)、高达馆 (HQH0) 和 人造心脏馆 (HMH0)，请直接使用网页 HTML 中 `input` 元素的 `value` 属性值（格式为 `HHMM`）。

    如何获取 `_START_TIMES_RAW`：在场馆预约页面，通过浏览器开发者工具检查时间选择框或按钮的 HTML 元素，查找包含时间信息的属性，或通过抓包工具查看成功预约请求中的 `start_time` 参数。

 3. 运行脚本

1. 保存脚本：将编辑好的 Python 代码保存为 `.py` 文件（例如 `expo_reservation.py`）。

2. 打开命令行：导航到您保存脚本的目录。

3. 执行命令：运行以下命令启动脚本：

python expo_reservation.py
4. 选择模式：脚本启动后，会提示您选择运行模式：

 输入 `1`：预约模式，脚本将尝试预约您在 `ALL_VENUES_CONFIG` 中配置的所有场馆。

 输入 `2`：选择模式，脚本会列出所有可用场馆，您可以输入编号（用逗号分隔，如 `1,3`）选择要预约的特定场馆。

5. 监控输出：脚本会开始发送请求并实时显示进度。

 如果预约成功，您会看到一条醒目的成功消息，并且脚本会自动停止。

 如果票已售罄，会显示“已无库存”信息，脚本将继续尝试其他时间或场馆。

6. 手动停止：随时按 `Ctrl+C` 可以强制停止脚本的运行。

 注意事项

Cookie 时效性：请务必定期更新 `COOKIE_STRING` 以确保脚本正常工作。

请求频率：请勿将并发请求数 (`CONCURRENT_REQUESTS_PER_BATCH`) 设置得过高，以免被目标服务器暂时限制 IP。（经测试最高为9）

网络稳定性：确保您的网络连接稳定。

 许可证

本项目使用 [MIT 许可证](https://opensource.org/licenses/MIT) 开源。

MIT 许可证摘要：您可以自由使用、复制、修改、合并、发布、分发、再许可和/或销售本软件的副本，但必须包含原始版权声明和此许可证声明。本软件按“现状”提供，不作任何明示或暗示的担保。
